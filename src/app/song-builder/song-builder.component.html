<div class="container margin-overlay">
    <div class="row center-it mb-5">
        <div class="col-xs-12 col-md-12">

            <div class="row">
                <div class="col-md-12">
                    <h1>SONG BUILDER</h1>
                    <button *ngIf="!tempo" class="clear-button" (click)="getRandomTempo(); getRandomKey(); shuffleArray(); resetClock(); flipArtist();">PRESS ME FOR A PRODUCTION PLAN</button>
                    <br>
                </div>
                <div *ngIf="tempo" class="col-md-12">
                        <h3>TEMPO</h3>
                        <p>{{ tempo }}bpm</p>
                        <br>
                        <h3>KEY</h3>
                        <p><a (click)="goToLink(key);">{{ key.key }}</a></p>
                </div>
                <div class="col-md-12 scroll-row">
                    <div *ngIf="commonInstruments" class="col-xs-12 col-md-12">
                        <br>
                        <ng-container *ngFor="let instrument of commonInstruments; index as i">
                            <ng-container *ngIf="i === isCurrentStep">
                                <h3>{{ instrument }}</h3>
                                <p>BY {{ currentArtist }}</p>
                                <button (click)="getRandomTempo(); getRandomKey(); shuffleArray(); resetClock(); flipArtist(); resetIndex();" class="clear-button mr-custom"><i class="fa fa-refresh" aria-hidden="true"></i></button>
                                <button *ngIf="i!=0" (click)="previous(i); resetClock(); flipArtist();" class="clear-button mr-custom"><i class="fa fa-arrow-left" aria-hidden="true"></i></button>
                                <button *ngIf="i!=commonInstruments.length-1" class="clear-button" (click)="next(i); resetClock(); flipArtist();"><i class="fa fa-arrow-right" aria-hidden="true"></i></button>
                                <br>
                                <br>
                                <br>
                            </ng-container>
                        </ng-container>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xs-12 col-md-12">
            <ng-container *ngIf="tempo && (displayLogic$ | async) as disp">
                <va529-countdown [time]="disp[0]" (ding)="getDing($any($event))" [reset$]="$any(resetClock$)"></va529-countdown>
            </ng-container>
        </div>

    </div>

</div>